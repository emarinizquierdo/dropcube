<link rel="import" href="/bower_components/polymer/polymer.html">

<!-- .............. POLYMER COMPONENTS  .............. -->
<link rel="import" href="/bower_components/iron-cookie/iron-cookie.html">


<!-- .............. APP COMPONENTS  .............. -->

<dom-module id="user-service">

    <template>
        <iron-cookie name="JSESSIONID" value="{{value}}" uri-safe expires="{{expires}}"></iron-cookie>
        <iron-ajax auto url="/s/users/me"  handle-as="json" on-response="_onResponse" last-response="{{userData}}"></iron-ajax>
    </template>



    <script>

        function User() {

            this.data = null;

            this.isAdmin = function() {
                return (this.data.role == 'ADMIN');
            }

        }

        // element registration
        Polymer({
            is: "user-service",
            properties: {
                user: {
                    type: Object,
                    notify: true,
                    value : new User()
                }
            },

            _onResponse : function(data){
              this.set('user', this.userData);
            }

        });
    </script>

</dom-module>
