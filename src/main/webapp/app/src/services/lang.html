<dom-module id="lang-service">

    <template>

        <iron-ajax auto url="{{src}}" on-response="_loadDictionary" last-response="{{dictionaries}}"></iron-ajax>

    </template>
    <script>
        // element registration
        Polymer({
            is: "lang-service",
            properties: {
                dictionary: {
                    type: Object,
                    notify: true,
                    value: {}
                },
                src: {
                    type: String
                },
                currentLang : {
                   type : String,
                   value : 'en_US'
                },
                langService : {
                  type : Object,
                  notify: true
                }
            },


            setLang: function(lang) {
               this.currentLang = (lang == 'en_US') ? 'en_US' : 'es_ES';
               this._loadDictionary();
            },

            _loadDictionary: function() {

               if(this.dictionaries && this.dictionaries[this.currentLang]){
                  this.set('dictionary', this.dictionaries[this.currentLang]);
               }

            },

            ready: function(){
              this.langService = this;
            }

        });
    </script>

</dom-module>
