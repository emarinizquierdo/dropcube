<link rel="import" href="/bower_components/polymer/polymer.html">

<!-- .............. POLYMER COMPONENTS  .............. -->
<link rel="import" href="/bower_components/app-route/app-location.html">
<link rel="import" href="/bower_components/app-route/app-route.html">
<link rel="import" href="/bower_components/iron-pages/iron-pages.html">
<link rel="import" href="/bower_components/iron-icon/iron-icon.html">
<link rel="import" href="/bower_components/app-layout/app-layout.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-progress/paper-progress.html">
<link rel="import" href="/bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">


<!-- .............. APP COMPONENTS  .............. -->

<link rel="import" href="styles/dropcube-styles.html">
<link rel="import" href="styles/dropcube-icons.html">

<link rel="import" href="services/lang.html">
<link rel="import" href="services/user.html">

<link rel="import" href="views/dropcube-main.html">
<link rel="import" href="views/dropcube-login.html">
<link rel="import" href="views/dropcube-devices.html">
<link rel="import" href="views/dropcube-device.html">

<link rel="import" href="components/dropcube-header.html">
<link rel="import" href="components/dropcube-landing.html">
<link rel="import" href="components/dropcube-footer.html">

<dom-module id="dropcube-content">

    <template>


        <style >
            .main-wrapper {
              padding-top: 64px;
            }
            .spacer {
                height: 64px;
            }

            iron-pages {
                height: 100%;
            }

        </style>

        <!-- .............. GENERAL RESOURCES  .............. -->
        <dropcube-icons-set></dropcube-icons-set>
        <!-- ............ END GENERAL RESOURCES  .............. -->


        <!-- ..............   MODEL CONTROL  .............. -->
        <lang-service id="langService" dictionary="{{dictionary}}" src="lang/locales.json"></lang-service>
        <user-service id="userService" user="{{user}}"></user-service>

        <!-- ..............  END MODEL CONTROL .............. -->

        <template is="dom-if" if="{{_isMain(routeData)}}">
            <dropcube-header dictionary="{{dictionary}}" user="{{user}}"></dropcube-header>
        </template>

        <div class="main-wrapper layout-column layout-fill">
            <div class="flex-grow">
                <app-location id="appLocation" route="{{route}}"></app-location>
                <app-route route="{{route}}" pattern="/:view" data="{{routeData}}" tail="{{subroute}}"></app-route>
                <app-route route="{{subroute}}" pattern="/:id" data="{{subrouteData}}">
                </app-route>
                <iron-pages selected="[[routeData.view]]" attr-for-selected="name">
                    <dropcube-main name="" dictionary="{{dictionary}}" user="{{user}}">
                    </dropcube-main>
                    <dropcube-login name="login" dictionary="{{dictionary}}">
                    </dropcube-login>
                    <dropcube-devices name="devices" dictionary="{{dictionary}}">
                    </dropcube-devices>
                    <dropcube-device route="{{subrouteData}}" name="device" dictionary="{{dictionary}}">
                    </dropcube-device>
                </iron-pages>
            </div>
            <dropcube-footer class="flex-nogrow" dictionary="{{dictionary}}"></dropcube-footer>
        </div>

    </template>

    <script>
        Polymer({
            is: "dropcube-content",
            properties: {
                user: {
                    type: Object
                }
            },
            _isMain: function(route) {
                return route.view != "";
            }

        });
    </script>

</dom-module>
